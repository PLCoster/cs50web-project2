{% extends "layout_index.html" %}

{% block title %}Chatroom{% endblock %}


{% block main %}
  <!-- Side Nav Bar -->
  <div class="sidenav">

    <!-- Logo Panel -->
    <a class="navbar-brand" id="logo" href="/">
      <img src="/static/Images/nav_logo.png" alt="" width="42" height="42">
      <h1>Flack<br>Teams</h1>
    </a>
    <hr>

    <!-- Username Panel -->
    <h4><span class="online">&#9673;</span> {{session.screen_name}}</h4>
    <hr>

    <!-- Workspace Panel -->
    <h5 id="workspace-options-display" class="clickable">Workspaces <i class="fas fa-plus-square"></i></h5>
    <h5 id="workspace-options-hide" class="clickable">Workspaces X</h5>
    <form id='new-workspace'>
      <label>Create a workspace:</label>
        <input type="text" id='workspace-name' name="workspace-name" placeholder="Workspace Name" required>
        <button class="btn btn-primary">Create Workspace</button>
    </form>
    <div id="curr-workspace-panel">
      <p>Current Workspace:</p>
      <h3 id="curr-workspace-show" class="clickable"></h3>
      <h3 id="curr-workspace-hide" class="clickable"></h3>
      <ul id="workspace-links">
      </ul>
    </div>
    <hr>

    <!-- Channel Panel -->
    <div class='channel-display'>
      <h5 id="channel-options-display" class="clickable">Channels <i class="fas fa-plus-square"></i></h5>
      <h5 id="channel-options-hide" class="clickable">Channels X</h5>
      <form id='new-channel'>
        <label>Create a channel:</label>
        <input type="text" id='channel-name' name="channel-name" placeholder="Channel Name" required>
        <button class="btn btn-primary">Create Channel</button>
      </form>
      <ul id="channel-links" class="visible">
      </ul>
    </div>
    <hr>
    <!-- Private Chat List -->
    <div class='channel-display'>
      <h5>Direct Messages <i class="fas fa-plus-square"></i></h5>
      <ul id="private-links" class="visible">
      </ul>
    </div>
    <hr>
    <footer>
      <a id="logout" href="#"><i class="fas fa-sign-out-alt"></i> Sign Out</a>
      <p class="footer-text">&copy; 2020 <a href="https://plcoster.github.io/homepage/index.html">P.L.Coster</a></p>
    </footer>
  </div>

  <!-- Channel Display Section -->
  <section id="chatroom-panel">
    <div id="chatroom-header">
      <div id="chatroom-header-text">
        <h5>Current Channel:</h5>
        <h4 id="curr-channel"></h4>
      </div>
      <div id="workspace-info">
        <h5></h5><i class="fas fa-users"></i> <span id="workspace-users"></span></h5>
      </div>
      <hr>
    </div>


    <!-- Channel Messages -->
    <div style="height: 70px;"></div>

    <div id="message-panel">
      <ul id="messages">
      </ul>
    </div>

    <div style="height: 60px;"></div>


    <!-- Chat text Entry -->
    <div id='chat-input'>
      <hr>
      <form id='chat-input-form'>
        <input type="text" id='message' name="message" placeholder="Enter Your Message" required>
        <button id='send-chat-input'>Send!</button>
      </form>
    </div>
  </section>

  <!-- Handlebars Templates -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.6/handlebars.min.js"></script>
  <script id="message-template" type="text/template">
    {% raw -%}
    <li class="user-message">
      <img class="profile-icon" src="/static/Images/profile/{{ image }}" alt="User Profile Image">
      <h5 class="message-username">{{ username }} <span class="message-date text-muted"> {{ date }} - <span data-livestamp="{{ timestamp }}"></span></span></h5>
      <p class="message-text">{{ message }}</p>
      <p class="message-options">
        {{# if client_message}}
        <a href=''><i class="fas fa-pencil-alt"> </i> Edit Message</a>
        <a href=''><i class="fas fa-trash-alt"> </i> Delete Message</a>
        {{else}}
        <a href='' class="private-message" data-user_id="{{ user_id }}"><i class="fas fa-user"></i> <span id="workspace-users"> Private Message</a>
        {{/if}}
      </p>
    </li>
    {%- endraw %}
  </script>

  <!-- Socket IO-->
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>

  <!-- livestamp scripts -->
  <script src="/static/scripts/jquery.js"></script>
  <script src="/static/scripts/moment.js"></script>
  <script src="/static/scripts/livestamp.js"></script>

  <!-- Custom Page Script-->
  <script src="/static/scripts/index.js"></script>


{% endblock %}

